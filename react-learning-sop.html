<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>React å­¸ç¿’ SOP | æ–°æ‰‹åˆ°è®€æ‡‚ AI ä»£ç¢¼</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0f1117;
    --surface: #1a1d27;
    --border: #2a2d3e;
    --accent: #61dafb;
    --accent2: #a78bfa;
    --accent3: #34d399;
    --accent4: #f59e0b;
    --text: #e2e8f0;
    --muted: #8892a4;
    --danger: #f87171;
  }

  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    padding: 2rem 1rem 4rem;
  }

  .container { max-width: 760px; margin: 0 auto; }

  header { text-align: center; margin-bottom: 3rem; }
  header h1 {
    font-size: 2rem; font-weight: 700;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
  }
  header p { color: var(--muted); font-size: 0.9rem; }

  /* Progress */
  .progress-bar-wrap {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 1.2rem 1.5rem; margin-bottom: 2rem;
    display: flex; align-items: center; gap: 1.2rem;
  }
  .progress-track {
    flex: 1; height: 8px; background: var(--border); border-radius: 99px; overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 99px;
    transition: width 0.4s cubic-bezier(.4,0,.2,1);
    width: 0%;
  }
  .progress-label { color: var(--muted); font-size: 0.82rem; white-space: nowrap; }
  .progress-pct { font-weight: 700; color: var(--accent); min-width: 42px; text-align: right; font-size: 0.9rem; }

  /* Phase */
  .phase { margin-bottom: 2rem; }
  .phase-header {
    display: flex; align-items: center; gap: 0.75rem;
    margin-bottom: 1rem; cursor: pointer; user-select: none;
  }
  .phase-badge {
    font-size: 0.7rem; font-weight: 700; letter-spacing: 0.08em;
    padding: 0.25rem 0.65rem; border-radius: 99px; text-transform: uppercase;
  }
  .badge-foundation { background: rgba(97,218,251,0.15); color: var(--accent); }
  .badge-core       { background: rgba(167,139,250,0.15); color: var(--accent2); }
  .badge-pattern    { background: rgba(52,211,153,0.15);  color: var(--accent3); }
  .badge-advanced   { background: rgba(245,158,11,0.15);  color: var(--accent4); }

  .phase-title { font-weight: 600; font-size: 1.05rem; }
  .phase-toggle { margin-left: auto; color: var(--muted); font-size: 0.8rem; transition: transform .2s; }
  .phase-toggle.open { transform: rotate(180deg); }

  /* Unit */
  .unit {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; margin-bottom: 0.75rem; overflow: hidden;
    transition: border-color .2s;
  }
  .unit.done { border-color: rgba(52,211,153,0.4); }
  .unit-header {
    display: flex; align-items: center; gap: 0.9rem;
    padding: 0.9rem 1.2rem; cursor: pointer;
  }
  .unit-header:hover { background: rgba(255,255,255,0.02); }

  .checkbox {
    width: 22px; height: 22px; border-radius: 6px;
    border: 2px solid var(--border); flex-shrink: 0;
    display: flex; align-items: center; justify-content: center;
    transition: all .2s; cursor: pointer;
  }
  .checkbox.checked { background: var(--accent3); border-color: var(--accent3); }
  .checkbox svg { display: none; }
  .checkbox.checked svg { display: block; }

  .unit-title { font-weight: 500; font-size: 0.95rem; flex: 1; }
  .unit.done .unit-title { color: var(--muted); text-decoration: line-through; }

  .unit-expand { color: var(--muted); font-size: 0.75rem; transition: transform .2s; }
  .unit-expand.open { transform: rotate(180deg); }

  .unit-body {
    padding: 0 1.2rem 1rem 3.5rem;
    display: none;
  }
  .unit-body.open { display: block; }
  .unit-body p { color: var(--muted); font-size: 0.85rem; margin-bottom: 0.6rem; line-height: 1.6; }
  .unit-body ul { list-style: none; }
  .unit-body ul li {
    color: var(--muted); font-size: 0.82rem; padding: 0.2rem 0;
    padding-left: 1rem; position: relative; line-height: 1.5;
  }
  .unit-body ul li::before { content: "â€º"; position: absolute; left: 0; color: var(--accent); }

  code {
    background: rgba(97,218,251,0.1); color: var(--accent);
    font-size: 0.8em; padding: 0.1em 0.4em; border-radius: 4px;
    font-family: 'Courier New', monospace;
  }

  .goal-tag {
    display: inline-block; font-size: 0.72rem; padding: 0.15rem 0.5rem;
    border-radius: 4px; margin-bottom: 0.5rem; font-weight: 600;
    background: rgba(245,158,11,0.15); color: var(--accent4);
  }

  .reset-btn {
    display: block; margin: 2rem auto 0; padding: 0.6rem 1.8rem;
    background: transparent; border: 1px solid var(--border);
    color: var(--muted); border-radius: 8px; cursor: pointer;
    font-size: 0.82rem; font-family: inherit; transition: all .2s;
  }
  .reset-btn:hover { border-color: var(--danger); color: var(--danger); }
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>âš›ï¸ React å­¸ç¿’ SOP</h1>
    <p>ç›®æ¨™ï¼šæœ€å¿«è®€æ‡‚ AI ç”Ÿæˆçš„ React ä»£ç¢¼ Â· æ‰“å‹¾å³ä»£è¡¨å®Œæˆ</p>
  </header>

  <div class="progress-bar-wrap">
    <div class="progress-track"><div class="progress-fill" id="fill"></div></div>
    <span class="progress-label">å·²å®Œæˆ</span>
    <span class="progress-pct" id="pct">0%</span>
  </div>

  <div id="app"></div>
  <button class="reset-btn" onclick="resetAll()">ğŸ”„ é‡ç½®æ‰€æœ‰é€²åº¦</button>
</div>

<script>
const data = [
  {
    phase: "éšæ®µä¸€ï¼šçœ‹æ‡‚ JSX èªæ³•",
    badge: "foundation",
    badgeLabel: "åŸºç¤å¿…è®€",
    units: [
      {
        id: "jsx",
        title: "JSX â€” åœ¨ JS è£¡å¯« HTML",
        goal: "AI ç”Ÿæˆçš„çµ„ä»¶ 90% éƒ½æ˜¯ JSXï¼Œé€™æ˜¯æœ€é«˜å„ªå…ˆç´š",
        desc: "JSX æ˜¯ React çš„æ ¸å¿ƒèªæ³•ã€‚å®ƒçœ‹èµ·ä¾†åƒ HTMLï¼Œä½†æœ¬è³ªæ˜¯ JavaScriptã€‚",
        points: [
          "JSX æ¨™ç±¤å¿…é ˆé–‰åˆï¼š<img /> è€Œä¸æ˜¯ <img>",
          "åªèƒ½æœ‰ä¸€å€‹æ ¹å…ƒç´ ï¼Œç”¨ <> Fragment åŒ…è£¹å¤šå€‹å…ƒç´ ",
          "JS è¡¨é”å¼ç”¨ {} åŒ…è£¹ï¼š{user.name}ã€{count + 1}",
          "class è¦å¯«æˆ classNameï¼Œfor è¦å¯«æˆ htmlFor",
          "æ³¨é‡‹å¯«æ³•ï¼š{/* é€™æ˜¯æ³¨é‡‹ */}",
        ]
      },
      {
        id: "components",
        title: "Function Components â€” çµ„ä»¶åŸºæœ¬çµæ§‹",
        goal: "æ‰€æœ‰ AI ä»£ç¢¼éƒ½æ˜¯ Function Componentï¼Œå¿…çœ‹",
        desc: "React çµ„ä»¶å°±æ˜¯ä¸€å€‹è¿”å› JSX çš„ JavaScript å‡½æ•¸ã€‚å‘½åå¿…é ˆå¤§å¯«é–‹é ­ã€‚",
        points: [
          "çµ„ä»¶åç¨±å¿…é ˆå¤§å¯«ï¼Œä¾‹ï¼šfunction Button() {}",
          "è¿”å›å€¼å°±æ˜¯è¦æ¸²æŸ“çš„ UI",
          "ä¸€å€‹æ–‡ä»¶é€šå¸¸åª export ä¸€å€‹ä¸»è¦çµ„ä»¶",
          "export default vs exportï¼šAI ä»£ç¢¼å…©ç¨®éƒ½æœƒç”¨",
        ]
      },
    ]
  },
  {
    phase: "éšæ®µäºŒï¼šç†è§£æ•¸æ“šæµ",
    badge: "core",
    badgeLabel: "æ ¸å¿ƒæ¦‚å¿µ",
    units: [
      {
        id: "props",
        title: "Props â€” å¾å¤–éƒ¨å‚³å…¥æ•¸æ“š",
        goal: "ææ‡‚ Props æ‰èƒ½çœ‹æ‡‚çµ„ä»¶ä¹‹é–“å¦‚ä½•å‚³éè³‡æ–™",
        desc: "Props æ˜¯çµ„ä»¶çš„ã€Œåƒæ•¸ã€ï¼Œçˆ¶çµ„ä»¶é€é Props å‚³æ•¸æ“šçµ¦å­çµ„ä»¶ï¼Œæ•¸æ“šæµæ˜¯å–®å‘çš„ï¼ˆç”±ä¸Šè€Œä¸‹ï¼‰ã€‚",
        points: [
          "Props æ˜¯å”¯è®€çš„ï¼Œå­çµ„ä»¶ä¸èƒ½ä¿®æ”¹å®ƒ",
          "è§£æ§‹å¯«æ³•ï¼šfunction Card({ title, desc }) {}",
          "children æ˜¯ç‰¹æ®Šçš„ Propï¼Œä»£è¡¨åŒ…è£¹çš„å­å…ƒç´ ",
          "TypeScript ä¸­å¿…é ˆç‚º Props å®šç¾© interface",
          "å¯ä»¥å‚³å‡½æ•¸ä½œç‚º Propsï¼ˆå›èª¿å‡½æ•¸æ¨¡å¼ï¼‰",
        ]
      },
      {
        id: "state",
        title: "useState â€” çµ„ä»¶è‡ªå·±çš„è¨˜æ†¶",
        goal: "State æ˜¯ React æœ€æ ¸å¿ƒçš„æ¦‚å¿µï¼ŒAI ä»£ç¢¼å¿…å®šå‡ºç¾",
        desc: "State æ˜¯çµ„ä»¶å…§éƒ¨å¯ä»¥æ”¹è®Šçš„æ•¸æ“šã€‚State è®ŠåŒ–æ™‚ï¼Œçµ„ä»¶æœƒè‡ªå‹•é‡æ–°æ¸²æŸ“ã€‚",
        points: [
          "èªæ³•ï¼šconst [value, setValue] = useState(åˆå§‹å€¼)",
          "å¿…é ˆç”¨ setValue() æ›´æ–°ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹ value",
          "State æ›´æ–°æ˜¯ç•°æ­¥çš„ï¼Œä¸æœƒç«‹å³ç”Ÿæ•ˆ",
          "å¦‚æœæ–°å€¼ä¾è³´èˆŠå€¼ï¼šsetValue(prev => prev + 1)",
          "State æ”¾åœ¨éœ€è¦ä½¿ç”¨å®ƒçš„æœ€è¿‘å…¬å…±çˆ¶çµ„ä»¶",
        ]
      },
      {
        id: "events",
        title: "Event Handling â€” éŸ¿æ‡‰ç”¨æˆ¶æ“ä½œ",
        goal: "é»æ“Šã€è¼¸å…¥ç­‰äº’å‹•æ˜¯æ‰€æœ‰ UI çš„åŸºç¤",
        desc: "React äº‹ä»¶èˆ‡ HTML é¡ä¼¼ï¼Œä½†å‘½åç”¨ camelCaseï¼Œå‚³çš„æ˜¯å‡½æ•¸è€Œéå­—ä¸²ã€‚",
        points: [
          "onClick={handleClick} â€” å‚³å‡½æ•¸ï¼Œä¸è¦åŠ  ()",
          "å¦‚éœ€å‚³åƒï¼šonClick={() => handleClick(id)}",
          "è¡¨å–®è¼¸å…¥ï¼šonChange={e => setValue(e.target.value)}",
          "e.preventDefault() é˜»æ­¢é»˜èªè¡Œç‚ºï¼ˆå¦‚è¡¨å–®æäº¤è·³é ï¼‰",
        ]
      },
    ]
  },
  {
    phase: "éšæ®µä¸‰ï¼šæŒæ¡å¸¸è¦‹æ¨¡å¼",
    badge: "pattern",
    badgeLabel: "å¿…å­¸æ¨¡å¼",
    units: [
      {
        id: "conditional",
        title: "æ¢ä»¶æ¸²æŸ“ â€” åˆ¤æ–·è¦é¡¯ç¤ºä»€éº¼",
        goal: "AI ç”Ÿæˆçš„æ¯å€‹çµ„ä»¶å¹¾ä¹éƒ½æœ‰æ¢ä»¶æ¸²æŸ“",
        desc: "æ ¹æ“šç‹€æ…‹æˆ– Props çš„å€¼ï¼Œå‹•æ…‹æ±ºå®šé¡¯ç¤ºå“ªäº›å…§å®¹ã€‚",
        points: [
          "&& çŸ­è·¯ï¼š{isLoggedIn && <Dashboard />}",
          "ä¸‰å…ƒé‹ç®—ï¼š{isLoading ? <Spinner /> : <Content />}",
          "å¯ä»¥ç”¨ if/else åœ¨ return ä¹‹å‰è™•ç†è¤‡é›œé‚è¼¯",
          "null ä»£è¡¨ä¸æ¸²æŸ“ä»»ä½•æ±è¥¿",
        ]
      },
      {
        id: "lists",
        title: "Lists & Keys â€” æ¸²æŸ“åˆ—è¡¨æ•¸æ“š",
        goal: "é™£åˆ— .map() æ˜¯ AI ä»£ç¢¼æœ€å¸¸è¦‹çš„æ¨¡å¼ä¹‹ä¸€",
        desc: "ç”¨ .map() æŠŠé™£åˆ—è½‰æ›æˆ JSX å…ƒç´ åˆ—è¡¨ï¼Œkey æ˜¯ React è¿½è¹¤å…ƒç´ çš„å”¯ä¸€æ¨™è­˜ã€‚",
        points: [
          "èªæ³•ï¼š{items.map(item => <Item key={item.id} />)}",
          "key å¿…é ˆåœ¨åŒç´šå…ƒç´ ä¸­å”¯ä¸€",
          "å„ªå…ˆç”¨ id ä½œç‚º keyï¼Œä¸è¦ç”¨ indexï¼ˆé™¤éåˆ—è¡¨ä¸è®Šï¼‰",
          ".filter() å¯å’Œ .map() çµ„åˆï¼šå…ˆç¯©é¸å†æ¸²æŸ“",
        ]
      },
      {
        id: "useeffect",
        title: "useEffect â€” å‰¯ä½œç”¨èˆ‡ç”Ÿå‘½é€±æœŸ",
        goal: "API èª¿ç”¨ã€è¨ˆæ™‚å™¨éƒ½åœ¨é€™è£¡ï¼ŒAI ä»£ç¢¼å¿…å‡ºç¾",
        desc: "useEffect åœ¨çµ„ä»¶æ¸²æŸ“å¾ŒåŸ·è¡Œå‰¯ä½œç”¨ï¼Œä¾‹å¦‚ fetch æ•¸æ“šã€è¨­å®šè¨ˆæ™‚å™¨ã€æ“ä½œ DOMã€‚",
        points: [
          "èªæ³•ï¼šuseEffect(() => { /* å‰¯ä½œç”¨ */ }, [ä¾è³´é™£åˆ—])",
          "[] ç©ºé™£åˆ— = åªåœ¨çµ„ä»¶æ›è¼‰æ™‚åŸ·è¡Œä¸€æ¬¡",
          "[count] = count æ”¹è®Šæ™‚é‡æ–°åŸ·è¡Œ",
          "è¿”å› cleanup å‡½æ•¸ï¼šreturn () => clearInterval(timer)",
          "fetch æ•¸æ“šçš„æ¨™æº–æ¨¡å¼ï¼šæ”¾åœ¨ useEffect è£¡ï¼Œçµæœå­˜é€² useState",
        ]
      },
    ]
  },
  {
    phase: "éšæ®µå››ï¼šé€²éšè®€æ‡‚èƒ½åŠ›",
    badge: "advanced",
    badgeLabel: "é€²éšå¼·åŒ–",
    units: [
      {
        id: "typescript",
        title: "TypeScript åŸºç¤ â€” çœ‹æ‡‚é¡å‹æ¨™æ³¨",
        goal: "AI ç”Ÿæˆçš„ä»£ç¢¼å¤§å¤šæ˜¯ TypeScriptï¼Œèªè­˜é¡å‹æ‰èƒ½å®Œå…¨è®€æ‡‚",
        desc: "TypeScript æ˜¯åŠ äº†é¡å‹çš„ JavaScriptã€‚é‡é»æ˜¯èƒ½çœ‹æ‡‚ï¼Œä¸ä¸€å®šè¦ä¸€é–‹å§‹å°±æœƒå¯«ã€‚",
        points: [
          "interface Props { name: string; age: number; }",
          "?: ä»£è¡¨å¯é¸å±¬æ€§ï¼štitle?: string",
          "string[] æˆ– Array<string> ä»£è¡¨å­—ä¸²é™£åˆ—",
          "useState<User | null>(null) â€” æ³›å‹æŒ‡å®š State é¡å‹",
          "InferSelectModelã€InferInsertModel æ˜¯å¾ DB Schema æ¨å°é¡å‹",
        ]
      },
      {
        id: "hooks-advanced",
        title: "å…¶ä»–å¸¸ç”¨ Hooks â€” useMemo / useCallback / useRef",
        goal: "AI ç”Ÿæˆæ€§èƒ½å„ªåŒ–ä»£ç¢¼æ™‚å‡ºç¾",
        desc: "é€™ä¸‰å€‹ Hook éƒ½æ˜¯ç‚ºäº†å„ªåŒ–æ€§èƒ½ï¼Œå…ˆèƒ½çœ‹æ‡‚ç”¨é€”ï¼Œå†æ·±å…¥ç†è§£åŸç†ã€‚",
        points: [
          "useRefï¼šç²å– DOM å…ƒç´  æˆ– ä¿å­˜ä¸è§¸ç™¼æ¸²æŸ“çš„å€¼",
          "useMemoï¼šå¿«å–è¨ˆç®—çµæœï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“é‡è¤‡è¨ˆç®—",
          "useCallbackï¼šå¿«å–å‡½æ•¸ï¼Œé¿å…å­çµ„ä»¶ä¸å¿…è¦çš„é‡æ¸²æŸ“",
          "è‡ªå®šç¾© Hookï¼šä»¥ use é–‹é ­çš„å‡½æ•¸ï¼Œå°è£å¯å¾©ç”¨çš„é‚è¼¯",
        ]
      },
      {
        id: "component-patterns",
        title: "çµ„ä»¶è¨­è¨ˆæ¨¡å¼ â€” çœ‹æ‡‚ AI çš„ä»£ç¢¼çµæ§‹",
        goal: "ç†è§£ç‚ºä½• AI é€™æ¨£åˆ†æ‹†çµ„ä»¶",
        desc: "AI ç”Ÿæˆçš„ä»£ç¢¼é€šå¸¸éµå®ˆç‰¹å®šçš„æ¶æ§‹æ¨¡å¼ï¼Œç†è§£é€™äº›æ¨¡å¼å¯ä»¥å¿«é€Ÿè®€æ‡‚æ•´é«”çµæ§‹ã€‚",
        points: [
          "ui/ ç›®éŒ„ï¼šç´”å±•ç¤ºçµ„ä»¶ï¼ˆDumbï¼‰ï¼Œåªæ¥å— Props",
          "features/ ç›®éŒ„ï¼šæœ‰é‚è¼¯çš„çµ„ä»¶ï¼ˆSmartï¼‰ï¼Œè² è²¬æ•¸æ“šç²å–",
          "index.ts æ¡¶æ–‡ä»¶ï¼šçµ±ä¸€ exportï¼ŒAI å¸¸ç”¨æ­¤æ¨¡å¼",
          "layout/ ç›®éŒ„ï¼šé é¢éª¨æ¶çµ„ä»¶ï¼Œå¦‚ Navbarã€Sidebar",
          "Server vs Client Componentsï¼ˆNext.jsï¼‰ï¼š'use client' æ¨™è¨˜",
        ]
      },
    ]
  }
];

function loadProgress() {
  try { return JSON.parse(localStorage.getItem('react-sop-progress') || '{}'); } catch { return {}; }
}
function saveProgress(p) { localStorage.setItem('react-sop-progress', JSON.stringify(p)); }

let progress = loadProgress();

function updateProgress() {
  const allIds = data.flatMap(ph => ph.units.map(u => u.id));
  const done = allIds.filter(id => progress[id]).length;
  const pct = Math.round((done / allIds.length) * 100);
  document.getElementById('fill').style.width = pct + '%';
  document.getElementById('pct').textContent = pct + '%';
}

function toggle(id) {
  progress[id] = !progress[id];
  saveProgress(progress);
  const unit = document.querySelector(`[data-id="${id}"]`);
  const cb = unit.querySelector('.checkbox');
  if (progress[id]) {
    unit.classList.add('done');
    cb.classList.add('checked');
  } else {
    unit.classList.remove('done');
    cb.classList.remove('checked');
  }
  updateProgress();
}

function toggleBody(id) {
  const body = document.getElementById('body-' + id);
  const btn = document.getElementById('expand-' + id);
  const isOpen = body.classList.contains('open');
  body.classList.toggle('open', !isOpen);
  btn.classList.toggle('open', !isOpen);
}

function resetAll() {
  if (!confirm('ç¢ºå®šè¦é‡ç½®æ‰€æœ‰é€²åº¦å—ï¼Ÿ')) return;
  progress = {};
  saveProgress(progress);
  document.querySelectorAll('.unit').forEach(u => u.classList.remove('done'));
  document.querySelectorAll('.checkbox').forEach(cb => cb.classList.remove('checked'));
  updateProgress();
}

function render() {
  const app = document.getElementById('app');
  app.innerHTML = data.map((phase, pi) => `
    <div class="phase">
      <div class="phase-header" onclick="togglePhase(${pi})">
        <span class="phase-badge badge-${phase.badge}">${phase.badgeLabel}</span>
        <span class="phase-title">${pi + 1}. ${phase.phase}</span>
        <span class="phase-toggle open" id="ptoggle-${pi}">â–¼</span>
      </div>
      <div id="phase-body-${pi}">
        ${phase.units.map((u, ui) => `
          <div class="unit${progress[u.id] ? ' done' : ''}" data-id="${u.id}">
            <div class="unit-header">
              <div class="checkbox${progress[u.id] ? ' checked' : ''}" onclick="toggle('${u.id}')">
                <svg width="12" height="10" viewBox="0 0 12 10" fill="none">
                  <path d="M1 5L4.5 8.5L11 1" stroke="#0f1117" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <span class="unit-title"><span style="color:var(--muted);margin-right:0.5rem;font-size:0.82rem;">${pi + 1}.${ui + 1}</span>${u.title}</span>
              <span class="unit-expand" id="expand-${u.id}" onclick="toggleBody('${u.id}')">â–¼</span>
            </div>
            <div class="unit-body" id="body-${u.id}">
              <div class="goal-tag">ğŸ¯ ${u.goal}</div>
              <p>${u.desc}</p>
              <ul>${u.points.map(p => `<li>${p.replace(/`([^`]+)`/g, '<code>$1</code>')}</li>`).join('')}</ul>
            </div>
          </div>
        `).join('')}
      </div>
    </div>
  `).join('');
  updateProgress();
}

function togglePhase(pi) {
  const body = document.getElementById('phase-body-' + pi);
  const toggle = document.getElementById('ptoggle-' + pi);
  const isHidden = body.style.display === 'none';
  body.style.display = isHidden ? '' : 'none';
  toggle.classList.toggle('open', isHidden);
}

render();
</script>
</body>
</html>
